# Basic server configuration

server {
    # Server listening on host and port
    host 127.0.0.1;
    port 8080;

    #Server name (optional)
    server_names example.com www.example.com;

    # Default error pages
    error_page 404 /errors/404.html;
    error_page 500 /errors/500.html;

    # Limit client body size
    client_max_body_size 5m;

    # Routes and route configurations

    # Static file route with directory root and directory listing
    location /static {
        root /var/www/static;   # Files served from /var/www/static
        autoindex on;           # Enable directory listing
    }

    # Redirection example
    location /old-page {
        redirect /new-page;
    }

    # Route to a specific directory with accepted methods and default file
    location /content {
        root /var/www/html/;
        methods GET POST;
        index index.html;       # Default file for directory
    }

    # CGI execution for PHP files
    location ~ \.php$ {
        fastcgi_pass 127.0.0.1:9000;                   # Forward to PHP-FPM or other CGI handler
        fastcgi_param SCRIPT_FILENAME /var/www/html$fastcgi_script_name;
        methods GET POST;
    }
    # Another route with HTTP redirection, directory root, and listing disabled
    location /docs {
        root /var/www/docs;
        autoindex off;  # Disable directory listing
    }

    # Route for default server (for unmatched host:port requests)
    location / {
        root /var/www/default;
        index index.html;
        error_page 404 /errors/404.html;
    }
}